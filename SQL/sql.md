## データベースとは何か
１．データベースはデータに対して様々な変更や登録や削除が出来る様になっているシステム

## リレーショナルデータベースとは何か？
- 現実のシステムで1番使用されているのは「リレーショナルデータベース」というもので
 必要に応じてデータを追加したり、テーブル同士を連結する事ができる様になっている

- リレーショナルデータベースはあくまで**データベースの種類**の事で**製品の名前**ではない
- 製品の名前としては**MYSQL**や**PostgreSQL**等のデータベースがある。


## エクセルとデータベースの違い
**1. ロジックとデータが分離している**  
エクセルの場合、同じシートにデータとロジックを書くことになると思う結果、ロジックとデータが混ざってしまいデータ自体の形が変わってしう。しかしデータベースの場合はデータとロジックが分離しており、SQLを発行してもデータ自体は変わらずに結果のみ出力する事が出来る。

**2. データを柔軟に組み合わせられる**  
エクセルだと1枚のシートに多くの情報を格納して、作業を行うがデータベースの場合は細かく何枚ものテーブルに分けて管理して、必要な時にテーブル同士を結合する為柔軟にデータが組み合わせられて尚且つ、管理もしやすい

**3. データの修正漏れを防ぐ**  
エクセルで社員名簿を管理していたとして、例えば一人結婚して名前が変更された場合その社員名簿をもとに作成しているシートを全て一つ1つずつ修正しないといけない。

**4. 大量のデータを扱う事が出来る**  
エクセルの場合だと、最大で100万行までしかデータを保持する事ができない。しかしデータベースの場合なら最低でも数十億行のデータを保持する事が出来る。

## テーブルの作り方
- 以下の文でテーブルを作成できる。

```
create table テーブル名(
  カラム名 データ型 制約
,  カラム2 データ型 制約
  );
```

実際に書いてみると
```
create table members(
  id  integer  primary key
, name string not null
, age integer not null
  );
```
上記の様に書いて、実行するとテーブルが作成される。

## テーブルに新しい行（レコード）を挿入する
### insert文
下記の様なコードになる

```
insert into members(id, name, age)
values(101, 'alice', 23)
     ,(102, 'bob', 22)
     ,(103, 'cat',3);
```

## テーブルの行を検索する

### Where文

```
select カラム名 from テーブル名 where 条件
```
例えば

```
select * from members where age = 3;
```
結果は、103番のレコードが出力される。

## レコードを更新する。

``` 
update テーブル名 set(更新したいカラム名 = 値)
where レコードを特定する条件;
```
上記の様になっている。

## レコードの削除
``` 
delete from テーブル名
where 削除条件;
```
**updateとdeleteはwhere条件を指定しなかったら全てのレコードが削除される。**


## テーブルを削除する
``` 
drop table テーブル名;
```

## 出力するレコード数を制限する
例えば
```
membersテーブル
ーーーーーーーーーーーーーーーーーーーーーーー
 id  |   name   | height | gender 
-----+----------+--------+--------
 101 | エレン   |    170 | M
 102 | ミカサ   |    170 | F
 103 | アルミン |    163 | M
 104 | ジャン   |    175 | M
 105 | サシャ   |    168 | F
 106 | コニー   |    158 | M
 ```
があるとすると
select * from example where gender = 'M'
だと下記の様になる。
```
 id  |   name   | height | gender 
-----+----------+--------+--------
 101 | エレン   |    170 | M
 103 | アルミン |    163 | M
 104 | ジャン   |    175 | M
 106 | コニー   |    158 | M
 ```
 
これを3人だけ男性が欲しいという条件にしたいとき
```
select * from members where gender = 'M' limit 3;
```
とすると
```
 id  |   name   | height | gender 
-----+----------+--------+--------
 101 | エレン   |    170 | M
 103 | アルミン |    163 | M
 104 | ジャン   |    175 | M
 ```
という結果がかえってくる。

また身長が2番目に高い人から3人男を抽出したいとなると
```
select * from members where gender = 'M' order by height desc limit 3 offset 1;
```

すると結果は
```
 id  |   name   | height | gender 
-----+----------+--------+--------
 101 | エレン   |    170 | M
 103 | アルミン |    163 | M
 106 | コニー   |    158 | M
 
 一番背が高いジャンがいない！！
```

となる
