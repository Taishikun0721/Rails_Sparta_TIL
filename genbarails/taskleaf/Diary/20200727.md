# 今日のまとめ
## ログイン機能の実装
###ログイン機能を作成する理由
今回の例で言うと、タスクを作成できる様にはしたがこのままでは誰でも人が作成したタスクをいじったりする事ができてしまう。
そのため、ユーザー機能を追加して自分のタスクを人から変更されたりする様な事がない様にする必要がある。

***

### ログイン機能の仕組み
ログイン機能は自分で実装したりdeviseの様なgemを使ったり、自分で実装したりできる。
基本的なログインの仕組みは事前に登録していたパスワードとメールアドレスの入力を要求して合致するかどうかを**認証**する  
結果、合致していれば認証完了と言う事になる。

***

### cookieとsession
ログイン機能にはcookieとsessionと言う機能が用いられる。
cookieとはブラウザとサーバー間でやりとりされる仕組みの事。
通常HTTPはステートレスなプロトコルなの次のリクエストの情報を引き継ぐ事ができない。そのため、sessionといく物を使い一連のリクエストの中で情報を共有できる様にしている。
session情報は、keyとvalueでセットになっていてブラウザからドメインなどに結び付けられて(ちょうどHashの様な形)サーバーに送信される.

### sessionの保管場所
railsではデフォルトでsessionの保管場所がCookieとなっている。  
ブラウザ側で対応するcookieを明示的に削除しないと消えない。

### 作業進捗
Userモデルを作成して、メールアドレスとパスワードのフォームなどを作成した。
userモデルにはpassword_digestと言うカラムを設ける事によって、この後にいれるbcryptと言うgemによって暗号化する事ができる。


### has_sequre_passqord
gem bcryptをしようする事によって使用できるメソッドの事

コメントアウトされているgemを解除する
```
gem 'bcrypt', バージョン
```

```
bundle install
```

その後モデルに以下の記述をする。
```
class User < ApplicationRecord
    has_sequre_password
end
```

上記のメソッドを定義する事で、データベースのカラムには存在しない二つの属性が追加される。
```
password
password_confirmation
```

仕組みとしては
1. ユーザーにパスワードと確認用パスワードを入力してもらう
2. Userクラスで2つが合致しているか検証
3. 検証を通過したら、hash化されたパスワードが生成される。
4. 最後に先ほど作成されたpassword_digestに保存される。



